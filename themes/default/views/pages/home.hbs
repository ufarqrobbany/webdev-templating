{{#if user}}
  {{!-- Form Buat Post --}}
  <div class="card" style="margin-bottom: 20px;">
    <form action="/api/v1/posts" method="POST" enctype="multipart/form-data" class="create-post-form">
      <div style="display: flex; gap: 10px; margin-bottom: 12px;">
        {{!-- User Avatar --}}
        <div style="width: 40px; height: 40px; background-color: #007bff; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 16px; flex-shrink: 0;">
          {{slice user.firstName 0 1}}{{slice user.lastName 0 1}}
        </div>
        {{!-- Text Area --}}
        <div style="flex-grow: 1;">
          <textarea name="content" class="form-control" rows="3" placeholder="Apa yang Anda pikirkan?" style="width: 100%; margin-bottom: 8px;"></textarea>
          {{!-- Media Upload --}}
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
              <label for="media" class="btn btn-light" style="margin: 0; cursor: pointer; font-weight: normal; background-color: var(--bg-color);">
                <i class="fas fa-image"></i> Tambah Media
              </label>
              <input type="file" id="media" name="file" accept="image/*,video/*" style="display: none;">
            </div>
            <button type="submit" class="btn btn-primary">Post</button>
          </div>
        </div>
      </div>
    </form>
  </div>
{{else}}
  <div class="card">
    <h2 style="margin-top: 2px; margin-bottom: 0px;">{{pageTitle}}</h2>
    <p style="margin-bottom: 2px;">{{pesan}}</p>
  </div>
{{/if}}

{{!-- Daftar Postingan --}}
<div class="post-list">
  {{#if posts.length}}
    {{#each posts}}
      {{> _post-item this}}
    {{/each}} {{!-- Akhir #each posts --}}
  {{else}}
    <div class="card text-center">
      {{!-- Pesan berbeda jika login vs anonim --}}
      {{#if user}}
        <p>Timeline Anda kosong. Coba follow beberapa user!</p>
      {{else}}
        <p>Belum ada postingan untuk ditampilkan. <a href="/login" class="form-link">Login</a> untuk melihat timeline.</p>
      {{/if}}
    </div>
  {{/if}}
</div>