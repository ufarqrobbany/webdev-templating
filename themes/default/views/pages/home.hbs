<div class="mx-auto max-w-2xl px-4 space-y-6">
  {{#if user}}
    {{!-- Form Buat Post (Unified Card Style) --}}
    <div class="card">
      <form action="/api/v1/posts" method="POST" enctype="multipart/form-data" class="create-post-form p-2 md:p-1">
        <div class="flex gap-3 md:gap-4 items-start">
          {{!-- User Avatar --}}
          <div class="avatar avatar-md flex-shrink-0">
            {{slice user.firstName 0 1}}{{slice user.lastName 0 1}}
          </div>
          {{!-- Text Area --}}
          <div class="flex-1">
            <textarea name="content" rows="3" placeholder="Apa yang Anda pikirkan?" class="input-surface w-full rounded-xl p-3 md:p-4 mb-2 resize-y min-h-[96px]"></textarea>
            {{!-- Media Upload + Submit --}}
            <div class="flex items-center justify-between">
              <div class="flex items-center justify-center">
                <label for="media" class="btn-media" id="mediaTrigger">
                  <i class="fas fa-image"></i>
                  <span class="hidden sm:inline" id="mediaLabelText" style="font-size: 14px;">Tambah Media</span>
                </label>
                <input type="file" id="media" name="file" accept="image/*,video/*" class="hidden" />
                <span id="mediaPreview" class="media-preview" style="display:none;" aria-label="Preview media"></span>
                <button type="button" id="mediaClear" class="media-clear-btn" title="Hapus media" style="display:none;" aria-label="Hapus media"><i class="fas fa-times"></i></button>
              </div>
              <button type="submit" class="btn-accent px-5 py-2.5 rounded-xl font-semibold text-gray-800 ml-2" style="font-size: 14px;">Posting</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  {{else}}
    <div class="glass-surface rounded-2xl p-5 shadow-combo border border-white/10">
      <h2 class="text-xl font-semibold mb-1">{{pageTitle}}</h2>
      <p class="opacity-90">{{pesan}}</p>
    </div>
  {{/if}}

  {{!-- Daftar Postingan --}}
  <div class="post-list space-y-4">
    {{#if posts.length}}
      {{#each posts}}
        {{> _post-item this}}
      {{/each}} {{!-- Akhir #each posts --}}
    {{else}}
      <div class="card text-center">
        {{!-- Pesan berbeda jika login vs anonim --}}
        {{#if user}}
          <p>Timeline Anda kosong. Coba follow beberapa user!</p>
        {{else}}
          <p>Belum ada postingan untuk ditampilkan. <a href="/login" class="form-link">Login</a> untuk melihat timeline.</p>
        {{/if}}
      </div>
    {{/if}}
  </div>
</div>