<div class="card post-item">
        {{!-- ðŸ‘‡ BLOK KODE BARU DENGAN AVATAR & FLEX HORIZONTAL ðŸ‘‡ --}}
        <div class="post-author-row" style="display: flex; align-items: center; gap: 10px;">
          {{#if this.author}}
            {{!-- Profile Picture with Initials --}}
            <div class="avatar avatar-sm flex-shrink-0">
              {{slice this.author.firstName 0 1}}{{slice this.author.lastName 0 1}}
            </div>
            {{!-- Author Name and "Anda" Label --}}
            <div style="display: flex; align-items: center; gap: 8px;">
              {{!-- ðŸ‘‡ PERBAIKI STYLE INI AGAR FONT-WEIGHT TIDAK GANDA ðŸ‘‡ --}}
              <a href="/users/{{this.author.id}}/profile" style="color: inherit; text-decoration: none; font-weight: bold;"> 
                <span class="post-author-name">{{this.author.firstName}} {{this.author.lastName}}</span>
              </a>
              {{#if (eq this.author.id @root.user.id)}}
                <span style="background-image: var(--gradient-accent); color: #1f2937; padding: 2px 8px; border-radius: 9999px; font-size: 12px; font-weight: 600; margin-left: 2px;">Anda</span>
              {{/if}}
            </div>

            {{!-- Tombol Follow (MVP v1.4) --}}
            {{#if @root.user}} {{!-- Cek apakah user-nya login --}}
              {{#if this.author}}
                {{!-- Tampilkan tombol follow hanya jika post bukan milik user yg login --}}
                {{!-- Helper 'eq' perlu didaftarkan di backend --}}
                {{#unless (eq this.author.id @root.user.id)}}
                  {{!-- Tampilkan Follow hanya jika TIDAK mengikuti penulis (isNotFollowing) --}}
                  {{#unless isFollowing}}
                    <form action="/api/v1/users/{{this.author.id}}/follow" method="POST" style="margin-top: 0px; margin-left: 4px; display: inline-block;">
                      <button type="submit" class="btn-follow">+ Follow</button>
                    </form>
                  {{/unless}}
                {{/unless}}
              {{/if}}
            {{/if}}
          {{else}}
            <span class="post-author-name">User Anonim</span>
          {{/if}}
        </div>
        {{!-- ðŸ‘† AKHIR BLOK KODE BARU ðŸ‘† --}}
        <p class="post-meta">{{formatDate this.createdAt}}</p>

        {{!-- Tampilkan teks postingan jika ada --}}
        {{#if this.content}}
          <p class="post-content" style="margin-bottom: 0px;">{{this.content}}</p>
        {{/if}}

        {{!-- TAMPILKAN MEDIA JIKA ADA (MVP v2.3) --}}
        {{#if this.photo}} {{!-- Cek apakah object photo tersedia --}}
          <div class="post-media-container" style="margin-top: 8px;">
            <div class="media-placeholder-icon"><i class="fas fa-camera" style="font-size: 36px; color: #6c757d;"></i></div> {{!-- Ikon Placeholder --}}
          {{!-- Cek tipe file menggunakan mimeType dari backend --}}
          {{!-- Asumsi helper 'contains' sudah tersedia di backend Handlebars Anda --}}
          {{#if (contains this.photo.mimeType 'video')}}
            <video controls>
              <source src="{{this.photo.path}}" type="{{this.photo.mimeType}}">
              Browser Anda tidak mendukung video tag.
            </video>
          {{else}}
            <img src="{{this.photo.path}}"> {{!-- Pastikan ALT DIHAPUS dan tanpa inline style --}}
          {{/if}}
          </div>
        {{/if}}
        {{!-- AKHIR AREA MEDIA --}}

        

        {{!-- AREA LIKE (MVP v2.1) --}}
        {{#if @root.user}}
        <div class="post-actions" style="margin-top: 16px; display: flex; align-items: center; gap: 10px;">
            {{!-- Logika Kondisional untuk Tombol --}}
            <svg width="0" height="0" style="position:absolute;visibility:hidden;">
              <defs>
                <linearGradient id="heartGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#dc2626" />
                  <stop offset="100%" stop-color="#f87171" />
                </linearGradient>
              </defs>
            </svg>
            {{#if this.isLikedByCurrentUser}}
              <form action="/api/v1/posts/{{this.id}}/unlike" method="POST" style="display:inline;margin:0;">
                <button type="submit" class="btn-unlike" aria-label="Batalkan Suka">
                  <span class="heart-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true"><path class="heart-gradient-fill" d="M12 21s-1-.55-2.35-1.68C6.4 16.6 4 14.28 4 11.25 4 9 5.79 7 8.05 7c1.54 0 2.78.99 3.45 2.03h.99C13.16 7.99 14.4 7 15.95 7 18.21 7 20 9 20 11.25c0 3.03-2.4 5.35-5.65 8.07C13 20.45 12 21 12 21z"/></svg>
                  </span>
                  <span class="like-count">{{#if this.likesCount}}{{this.likesCount}}{{else}}0{{/if}}</span>
                </button>
              </form>
            {{else}}
              <form action="/api/v1/posts/{{this.id}}/like" method="POST" style="display:inline;margin:0;">
                <button type="submit" class="btn-like" aria-label="Suka">
                  <span class="heart-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true"><path class="heart-outline" d="M12 21s-1-.55-2.35-1.68C6.4 16.6 4 14.28 4 11.25 4 9 5.79 7 8.05 7c1.54 0 2.78.99 3.45 2.03h.99C13.16 7.99 14.4 7 15.95 7 18.21 7 20 9 20 11.25c0 3.03-2.4 5.35-5.65 8.07C13 20.45 12 21 12 21z"/></svg>
                  </span>
                  <span class="like-count">{{#if this.likesCount}}{{this.likesCount}}{{else}}0{{/if}}</span>
                </button>
              </form>
            {{/if}}
            {{!-- Akhir Logika Kondisional --}}
        </div>
        {{/if}}
        {{!-- AKHIR AREA LIKE --}}

        {{!-- AREA KOMENTAR (MVP v2.2) --}}
        {{!-- Tampilkan border hanya jika user login atau ada komentar --}}
        {{#if @root.user}}
          <div class="post-comments" style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 15px;">
        {{else}}
          {{#if this.comments.length}}
            <div class="post-comments" style="margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 15px;">
          {{else}}
            <div class="post-comments" style="margin-top: 0px; padding-top: 0;">
          {{/if}}
        {{/if}}
          {{!-- Form Tambah Komentar Utama --}}
          {{#if @root.user}} {{!-- Harus ../user karena masih di #each posts --}}
            <form action="/api/v1/posts/{{this.id}}/comments" method="POST" class="comment-form" style="margin-bottom: 15px; display: flex; flex-direction: row; gap: 8px;">
              <input type="hidden" name="postId" value="{{this.id}}">
              <div class="form-group" style="flex-grow: 1; margin-bottom: 0;">
                <input name="content" rows="1" placeholder="Tulis komentar..." required class="input-surface w-full rounded-xl px-3 py-2" style="font-size: 0.9em;" />
              </div>
              <button type="submit" class="btn btn-secondary btn-sm">Kirim</button>
            </form>
          {{/if}}

          {{!-- Daftar Komentar --}}
          <div class="comment-list">
            {{#if this.comments.length}}
              <h4 style="margin-top: 0; margin-bottom: 10px; font-size: 0.95em;">Komentar:</h4>
              {{!-- Loop Komentar Utama --}}
              {{#each this.comments}}
                <div class="comment-item" style="margin-bottom: 10px; font-size: 0.9em;">
                  <div class="post-author-row" style="display: flex; align-items: center; gap: 10px;">
                    <div class="avatar avatar-sm flex-shrink-0">
                      {{slice this.author.firstName 0 1}}{{slice this.author.lastName 0 1}}
                    </div>
                    <strong class="comment-author">
                      {{#if this.author}}
                        <a href="/users/{{this.author.id}}/profile" style="color: inherit; text-decoration: none; font-weight: bold;">
                           {{this.author.firstName}} {{this.author.lastName}}
                        </a>
                      {{else}}
                        Anonim
                      {{/if}}
                    </strong>
                    <span style="color: var(--text-secondary-color); text-align: right; flex-grow: 1">{{formatDate this.createdAt}}</span>
                  </div>
                  <p class="comment-content" style="margin: 2px 0 5px 44px;">{{this.content}}</p>

                  {{!-- TOMBOL & FORM BALAS --}}
                  {{#if @root.user}} {{!-- Harus ../../user karena di dalam #each comments --}}
                    <div class="comment-reply-section">
                      <button class="btn-link btn-sm js-reply-button" data-comment-id="{{this.id}}" style="background: none; border: none; color: var(--link-color); cursor: pointer; padding: 0; font-size: 0.9em; margin-left: 44px;">
                        Balas
                      </button>
                      {{!-- Form Balasan (Hidden by default) --}}
                      <form action="/api/v1/comments/{{this.id}}/replies" method="POST" class="reply-form" id="reply-form-{{this.id}}" style="display: none; margin-left: 44px; margin-bottom: 15px; flex-direction: row; gap: 8px;">
                        <input type="hidden" name="postId" value="{{../id}}">
                        <div class="form-group" style="flex-grow: 1; margin-bottom: 0;">
                          <input name="content" rows="1" placeholder="Tulis balasan..." required class="input-surface w-full rounded-xl px-3 py-2" style="font-size: 0.95em;" />
                        </div>
                        <button type="submit" class="btn btn-secondary btn-sm">Kirim Balasan</button>
                      </form>
                    </div>
                  {{/if}}
                  {{!-- AKHIR TOMBOL & FORM BALAS --}}

                  {{!-- AREA TAMPILKAN BALASAN --}}
                  <div class="comment-replies" style="margin-left: 42px; margin-top: 10px;">
                    {{#if this.replies.length}}
                      {{#each this.replies}}
                        <div class="comment-item reply-item" style="margin-bottom: 8px; font-size: 0.95em;">
                          <div class="post-author-row" style="display: flex; align-items: center; gap: 10px;">
                            <div class="avatar avatar-sm flex-shrink-0">
                              {{slice this.author.firstName 0 1}}{{slice this.author.lastName 0 1}}
                            </div>
                            <strong class="comment-author">
                              {{#if this.author}}
                                {{!-- ðŸ‘‡ MODIFIKASI DI SINI JUGA: Link ke profil author balasan ðŸ‘‡ --}}
                                <a href="/users/{{this.author.id}}/profile" style="color: inherit; text-decoration: none; font-weight: bold;">
                                   {{this.author.firstName}} {{this.author.lastName}}
                                </a>
                              {{else}}
                                Anonim
                              {{/if}}
                            </strong>
                            <span style="color: var(--text-secondary-color); text-align: right; flex-grow: 1;">{{formatDate this.createdAt}}</span>
                          </div>
                          <p class="comment-content" style="margin: 2px 0 0 44px;">{{this.content}}</p>
                        </div>
                      {{/each}}
                    {{/if}}
                  </div>
                  {{!-- AKHIR AREA BALASAN --}}

                </div> {{!-- Akhir .comment-item --}}
              {{/each}} {{!-- Akhir #each comments --}}
            {{/if}} {{!-- Akhir if comments.length --}}
          </div> {{!-- Akhir .comment-list --}}
        </div> {{!-- Akhir .post-comments --}}
        {{!-- AKHIR AREA KOMENTAR --}}

      </div> {{!-- Akhir .card .post-item --}}